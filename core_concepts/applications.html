<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Applications - Linera Developer Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../overview.html"><strong aria-hidden="true">2.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../getting_started.html"><strong aria-hidden="true">3.</strong> Getting started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting_started/installation.html"><strong aria-hidden="true">3.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../getting_started/hello_linera.html"><strong aria-hidden="true">3.2.</strong> Hello, Linera</a></li></ol></li><li class="chapter-item expanded "><a href="../core_concepts.html"><strong aria-hidden="true">4.</strong> Core Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../core_concepts/microchains.html"><strong aria-hidden="true">4.1.</strong> Microchains</a></li><li class="chapter-item expanded "><a href="../core_concepts/wallet.html"><strong aria-hidden="true">4.2.</strong> The Wallet</a></li><li class="chapter-item expanded "><a href="../core_concepts/node_service.html"><strong aria-hidden="true">4.3.</strong> Node Service</a></li><li class="chapter-item expanded "><a href="../core_concepts/applications.html" class="active"><strong aria-hidden="true">4.4.</strong> Applications</a></li></ol></li><li class="chapter-item expanded "><a href="../sdk.html"><strong aria-hidden="true">5.</strong> Writing Linera Applications</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sdk/creating_a_project.html"><strong aria-hidden="true">5.1.</strong> Creating a Project</a></li><li class="chapter-item expanded "><a href="../sdk/state.html"><strong aria-hidden="true">5.2.</strong> Creating the Application State</a></li><li class="chapter-item expanded "><a href="../sdk/abi.html"><strong aria-hidden="true">5.3.</strong> Defining the ABI</a></li><li class="chapter-item expanded "><a href="../sdk/contract.html"><strong aria-hidden="true">5.4.</strong> Writing the Contract Binary</a></li><li class="chapter-item expanded "><a href="../sdk/service.html"><strong aria-hidden="true">5.5.</strong> Writing the Service Binary</a></li><li class="chapter-item expanded "><a href="../sdk/deploy.html"><strong aria-hidden="true">5.6.</strong> Deploying the Application</a></li><li class="chapter-item expanded "><a href="../sdk/composition.html"><strong aria-hidden="true">5.7.</strong> Calling other Applications</a></li><li class="chapter-item expanded "><a href="../sdk/testing.html"><strong aria-hidden="true">5.8.</strong> Writing Tests</a></li></ol></li><li class="chapter-item expanded "><a href="../advanced_topics.html"><strong aria-hidden="true">6.</strong> Advanced Topics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../advanced_topics/views.html"><strong aria-hidden="true">6.1.</strong> Views</a></li><li class="chapter-item expanded "><a href="../advanced_topics/validators.html"><strong aria-hidden="true">6.2.</strong> Validators</a></li><li class="chapter-item expanded "><a href="../advanced_topics/block_creation.html"><strong aria-hidden="true">6.3.</strong> Creating New Blocks</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Linera Developer Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="applications"><a class="header" href="#applications">Applications</a></h1>
<p>This section is all about building applications in Linera. The Linera programming
model is designed to provide a rich ecosystem to enable developers to take advantage
of the scaling architecture of microchains.</p>
<p>Linera uses the WebAssembly VM to execute user applications. For now
the <a href="./sdk.html">SDK</a> used to develop Linera applications is exclusively for
the <a href="https://www.rust-lang.org/">Rust</a> programming language. This will be
covered in depth in the <a href="./sdk.html">next section</a>.</p>
<h2 id="the-application-deployment-lifecycle"><a class="header" href="#the-application-deployment-lifecycle">The Application Deployment Lifecycle</a></h2>
<p>Linera Applications are designed to be powerful yet re-usable. For this reason
there is a distinction between the application bytecode and an application
instance on the network.</p>
<p>Applications undergo a lifecycle transition aimed at making development easy and
flexible:</p>
<ol>
<li>The application bytecode is built from a Rust project with the <code>linera-sdk</code>
dependency.</li>
<li>The application bytecode is published to the network on a given microchain.
The bytecode location itself is then opaque to the rest of the network, the
only way to reference it is with a bytecode identifier.</li>
<li>After the bytecode is published, a user can create a new application instance
by referencing the bytecode and providing initialization parameters. This
process returns an application identifier which can be used to reference and
interact with the application.</li>
<li>The same bytecode identifier can be used as many times is needed by as many
users are needed to create distinct applications.</li>
</ol>
<p>Happily, the application deployment lifecycle is abstracted from the user, and
an application can be published with a single command:</p>
<pre><code class="language-bash">linera --storage $LINERA_STORAGE --wallet $LINERA_WALLET publish-and-create &lt;contract-path&gt; &lt;service-path&gt; &lt;init-args&gt;
</code></pre>
<p>This will publish the bytecode as well as initialize the application for you.</p>
<h2 id="anatomy-of-an-application"><a class="header" href="#anatomy-of-an-application">Anatomy of an Application</a></h2>
<p>An application is broken into two major components, the <em>contract</em> and the <em>service</em>.</p>
<p>The contract is gas-metered (for more details,
see <a href="../advanced_topics/execution_model.html">execution model</a>), and is the part
of the application which executes operations and messages, make cross-application
calls and modifies the application's state. The details are covered in more
depth in the
<a href="./sdk.html">SDK docs</a>.</p>
<p>The service is non-metered and read-only. It is used primarily to query the
state of an application and hydrate the presentation layer (think front-end)
with the data required for a user interface.</p>
<p>Finally, spanning both the contract and service is the Application's state in
the form of a <a href="./../advanced_topics/views.html">View</a>, but more on that later.</p>
<h2 id="operations-and-messages"><a class="header" href="#operations-and-messages">Operations and Messages</a></h2>
<blockquote>
<p>For this section we'll be using the example of a hypothetical &quot;fungible token&quot;
application where users can send tokens to each other.</p>
</blockquote>
<p>At the system-level, interacting with an application can be done via operations
and messages.</p>
<p><strong>Operations</strong> are defined by an application developer and each
application can have a completely different set of operations. Chain owners then
actively create operations and put them in their block proposals to interact
with an application.</p>
<p>Using our hypothetical &quot;fungible token&quot; application as an example, an operation
for a user to transfer funds to another user would look like this:</p>
<pre><code class="language-rust ignore"><span class="boring">extern crate serde;
</span><span class="boring">use serde::{Deserialize, Serialize};
</span>#[derive(Debug, Deserialize, Serialize)]
pub enum Operation {
    /// A transfer from a (locally owned) account to a (possibly remote) account.
    Transfer {
        owner: AccountOwner,
        amount: Amount,
        target_account: Account,
    },
    // Meant to be extended here
}</code></pre>
<p><strong>Messages</strong> are outcomes of execution (of operations or other messages).
Messages from one chain can be sent in a cross-chain message to another. Block
proposers also actively include messages in their block proposal, but unlike with
operations, they are only allowed to include them in the right order (possibly
skipping some), and only if they were actually created by another chain (or the
same chain, earlier).</p>
<p>In our &quot;fungible token&quot; application, a message to credit an account would look like this:</p>
<pre><code class="language-rust ignore"><span class="boring">extern crate serde;
</span><span class="boring">use serde::{Deserialize, Serialize};
</span>#[derive(Debug, Deserialize, Serialize)]
pub enum Message {
    Credit { owner: AccountOwner, amount: Amount },
    // Meant to be extended here
}</code></pre>
<h2 id="interacting-with-an-application"><a class="header" href="#interacting-with-an-application">Interacting with an Application</a></h2>
<p>To interact with an application, we run the Linera client
<a href="wallet.html#node-service">in service mode</a>. It exposes a GraphQL API for every
application running on that chain at <code>localhost:8080/&lt;application-id&gt;</code>.</p>
<p>Simple navigating there with your browser will open a GraphiQL interface which
enables you to graphically explore the state of your application.</p>
<h2 id="registering-an-application-across-chains"><a class="header" href="#registering-an-application-across-chains">Registering an Application across Chains</a></h2>
<p>If Alice is using an application on her chain and starts interacting with Bob
via the application, e.g. sends him some tokens using the <code>fungible</code> example,
the application automatically gets registered on Bob's chain, too, as soon as
he handles the incoming cross-chain messages. After that, he can execute the
application's operations on his chain, too, and e.g. send tokens to someone.</p>
<p>But there are also cases where Bob may want to start using an application he
doesn't have yet. E.g. maybe Alice regularly makes posts using the <code>social</code>
example, and Bob wants to subscribe to her.</p>
<p>In that case, trying to execute an application-specific operation would fail,
because the application is not registered on his chain.
He needs to request it from Alice first:</p>
<pre><code class="language-bash">linera --wallet $LINERA_WALLET --storage $LINERA_STORAGE request-application &lt;application-id&gt; --target-chain-id &lt;alices-chain-id&gt;
</code></pre>
<p>Once Alice processes his message (which happens automatically if she is running
the client in service mode), he can start using the application.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../core_concepts/node_service.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../sdk.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../core_concepts/node_service.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../sdk.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
